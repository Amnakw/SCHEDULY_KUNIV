{% extends "base.html" %}

{% block title %}Edit Users{% endblock title %}

{% block content %}
      <div class="p-5">
        <div class="delete_div text-white">
          <div class=" mt-4 pt-4 mb-3 pb-3 pl-5 pr-5 mr-5 ml-5 text-center">
            <h2 class="title text-light text-white">
              Edit Users
            </h2>
          </div>

          <!-- Searchbar -->
          <form action="{% url 'edit-users' %}" method="GET">
            <div class="row ml-5 pl-5 pr-5 mr-5">
              <div
                class=" d-flex justify-content-between rounded-pill search-group"
              >
                <input
                  type="text"
                  name='q'
                  class="rounded-pill search-input text-dark"
                  placeholder="Search..."
                  value="{{request.GET.q}}"
                />
                <button 
                  class="search-btn rounded-circle" 
                  type="submit"
                  value="Search"
                >
                  <i class="fa fa-search"></i>
                </button>
              </div>
            </div>
          </form>

          <!--Used to display messages related to updating status -->
          {% include "messages.html" %}
          <div class="text-center pt-4">
          <h4 class="title pt-4">
            Instructors
          </h4>
          </div>

          <!-- Instructors Table  -->
          <div class="mr-5 pr-5 ml-5 pl-5 mt-4 pt-4">
            <table class="table table-striped table-dark">
              <thead>
                <tr >
                  <th class="text-center">ID</th>
                  <th class="text-center">Full Name</th>
                  <th class="text-center">Instructors Statistics Allowed </th>

                  <th class="text-center">Update</th>
                </tr>
              </thead>

              {% for user in instructors_list %}

              <tr>
                <td class="text-center">{{user.instructor_id}}</td>
                <td class="text-center">{{user.fullname}}</td>
                {% if user.all_statistics_allowed == True %}
                <td class="text-center">Yes</td>
                {% else %}
                <td class="text-center">No</td>
                {% endif %}

                <td class="text-center">
                  <a
                    class="btn btn-primary rounded-pill"
                    href="{% url 'edit-instructor' user_id=user.id %}"
                  >
                    Update
                  </a>
                </td>
              </tr>
              {% endfor %}
            </table>
          </div>

          <div class="text-center">
             <h4 class="title  pt-4">
            Students
          </h4>   
          </div>
      
          <!-- Students Table  -->
          <div class="mb-5 pb-5 mr-5 pr-5 ml-5 pl-5 mt-4 pt-4">
            <table class="table table-striped table-dark">
              <thead>
                <tr>
                  <th class="text-center">ID</th>
                  <th class="text-center">Full Name</th>
                  <th class="text-center">Update</th>
                </tr>
              </thead>

              {% for user in students_list %}

              <tr>
                <td class="text-center">{{user.student_id}}</td>
                <td class="text-center">{{user.fullname}}</td>
                <td class="text-center">
                  <a
                    class="btn btn-primary rounded-pill"
                    href="{% url 'edit-student' user_id=user.id %}"
                  >
                    Update
                  </a>
                </td>
              </tr>
              {% endfor %}
            </table>
          </div>
        </div>
      </div>
{% endblock content %}

